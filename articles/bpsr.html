<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="bpsr">
<title>bpsr • bpsr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="bpsr">
<meta property="og:description" content="bpsr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">bpsr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/bpsr.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>bpsr</h1>
            
      
      
      <div class="d-none name"><code>bpsr.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dzulfiqarfr.github.io/bpsr/">bpsr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<p>A common resource that people need from Statistics Indonesia (BPS) is
a dataset. This vignette will show you how to get it using the agency’s
application programming interface (API) with the help of bpsr.</p>
<p>If you’re not familiar with an API and want to learn about it first,
this <a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Client-side_web_APIs/Introduction" class="external-link"><em>Introduction
to Web APIs</em> from the MDN Web Docs</a> is a good place to start.</p>
<p>You may also want to take a look at <a href="https://webapi.bps.go.id/documentation/" class="external-link">BPS API’s
documentation</a>.</p>
<p>To be able to use it, you need to create an account on <a href="https://webapi.bps.go.id/developer/register" class="external-link">BPS API’s
website</a>—if you haven’t already. Having created an account, you need
to create an application. To do this, go to your profile and navigate to
the Application tab.</p>
<div class="section level2">
<h2 id="set-api-key">Set API key<a class="anchor" aria-label="anchor" href="#set-api-key"></a>
</h2>
<p>The API requires users to identify themselves using a key. To provide
your key to bpsr, store it in an environment variable called
<code>BPSR_KEY</code>. This package provides a helper function to set
the key.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/bps_set_key.html">bps_set_key</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>To keep you from repeating this step when working on other projects
in the future, store the key in your <code>.Renviron</code>. You can
easily do this with the help of
<code><a href="https://usethis.r-lib.org/reference/edit.html" class="external-link">usethis::edit_r_environ()</a></code>.</p>
</div>
<div class="section level2">
<h2 id="get-dataset">Get dataset<a class="anchor" aria-label="anchor" href="#get-dataset"></a>
</h2>
<p>The API provides two types of datasets, which it calls the static
table<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;The static table is basically a dataset stored in a
spreadsheet that comes in a Microsoft Excel file format with the “.xls”
extension. It usually has multiple heavily-formatted tables on a single
sheet.&lt;/p&gt;"><sup>1</sup></a>
and the dynamic table<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;The dynamic table is a dataset stored in a &lt;a href="https://developer.mozilla.org/en-US/docs/Glossary/JSON" class="external-link"&gt;JSON&lt;/a&gt;.&lt;/p&gt;'><sup>2</sup></a>. Most datasets are dynamic tables, so we’ll
focus on them here.</p>
<p>Suppose that we’re interested in datasets related to the Human
Development Index (HDI), which measures both material and nonmaterial
well-being.</p>
<p>To request a dataset, we need to know its identifier (ID). The API
provides the dataset table that contains each dataset’s ID and title,
among other things. We can use <code><a href="../reference/bps_dataset.html">bps_dataset()</a></code> to request
this table.</p>
<p>However, we may want to filter the dataset table by subject.
Requesting the complete table can take a few seconds, while requesting
the filtered table may take less than a second. As of November 2022, the
dataset table has 1,411 records. These datasets are divided into 50
subjects.</p>
<p>To narrow down the dataset table by subject, we’ll need the ID of the
HDI subject. So we’ll start by requesting the subject table using
<code><a href="../reference/bps_subject_category.html">bps_subject()</a></code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set `page = Inf` to request the complete subject table</span></span>
<span><span class="va">table_subject</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bps_subject_category.html">bps_subject</a></span><span class="op">(</span>page <span class="op">=</span> <span class="cn">Inf</span>, lang <span class="op">=</span> <span class="st">"eng"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">table_subject_hdi</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>  <span class="va">table_subject</span>, </span>
<span>  <span class="va">title</span> <span class="op">==</span> <span class="st">"Human Development Indices"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">table_subject_hdi</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 5</span></span></span>
<span><span class="co">#&gt;   subject_id title                     subject_category_id subject_cate…¹ ntabel</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 26         Human Development Indices 1                   Social and Po… <span style="color: #BB0000;">NA</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with abbreviated variable name ¹​subject_category</span></span></span></code></pre></div>
<p>Next, we’ll request the table of datasets related to the HDI. We’ll
do this by supplying the HDI subject ID to
<code><a href="../reference/bps_dataset.html">bps_dataset()</a></code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">table_data_hdi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bps_dataset.html">bps_dataset</a></span><span class="op">(</span></span>
<span>  subject_id <span class="op">=</span> <span class="va">table_subject_hdi</span><span class="op">$</span><span class="va">subject_id</span>, </span>
<span>  page <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  lang <span class="op">=</span> <span class="st">"eng"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">table_data_hdi</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 15 × 9</span></span></span>
<span><span class="co">#&gt;    dataset_id title              subje…¹ subject def   notes verti…² unit  graph</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 3          Life Expectancy R… 26      Human … <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    2       Year      3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 4          Literacy Rate      26      Human … <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    2       Perc…     3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 5          Mean Years School… 26      Human … <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    2       Year      3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 6          Adjusted per Capi… 26      Human … <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    2       Thou…     3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 7          Human Development… 26      Human … <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    2       <span style="color: #BB0000;">NA</span>        3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 202        Human Development… 26      Human … <span style="color: #BB0000;">NA</span>    Seri… 1       <span style="color: #BB0000;">NA</span>        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 293        Human Development… 26      Human … <span style="color: #BB0000;">NA</span>    &amp;lt;… 112     <span style="color: #BB0000;">NA</span>        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 413        [New Method] Huma… 26      Human … <span style="color: #BB0000;">NA</span>    &amp;lt;… 431     <span style="color: #BB0000;">NA</span>        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 414        [New Method] Umur… 26      Human … <span style="color: #BB0000;">NA</span>    &amp;lt;… 431     Year      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 415        [New Method] Mean… 26      Human … <span style="color: #BB0000;">NA</span>    &amp;lt;… 431     Year      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> 416        [New Method] Adju… 26      Human … <span style="color: #BB0000;">NA</span>    &amp;lt;… 431     Thou…     1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> 417        [New Method] Expe… 26      Human … <span style="color: #BB0000;">NA</span>    &amp;lt;… 431     Year      1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> 418        [New Method] Rank… 26      Human … <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>    2       <span style="color: #BB0000;">NA</span>        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> 494        [New Method] Huma… 26      Human … <span style="color: #BB0000;">NA</span>    &amp;lt;… 1       <span style="color: #BB0000;">NA</span>        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> 1505       [New Method] Chan… 26      Human … <span style="color: #BB0000;">NA</span>    &amp;lt;… 2       <span style="color: #BB0000;">NA</span>        1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with abbreviated variable names ¹​subject_id, ²​vertical_var_group_id</span></span></span></code></pre></div>
<p>Now, we can finally request the HDI datasets using
<code><a href="../reference/bps_dataset.html">bps_get_dataset()</a></code>. Let’s start with the headline index.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">table_data_hdi_hl</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>  <span class="va">table_data_hdi</span>, </span>
<span>  <span class="va">title</span> <span class="op">==</span> <span class="st">"[New Method] Human Development Index"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">hdi_headline</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bps_dataset.html">bps_get_dataset</a></span><span class="op">(</span><span class="va">table_data_hdi_hl</span><span class="op">$</span><span class="va">dataset_id</span>, lang <span class="op">=</span> <span class="st">"eng"</span><span class="op">)</span></span>
<span><span class="va">hdi_headline</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 7,067 × 5</span></span></span>
<span><span class="co">#&gt;    vertical_var derived_var  year period   var</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> ACEH         <span style="color: #BB0000;">NA</span>           <span style="text-decoration: underline;">2</span>010 Annual  67.1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> ACEH         <span style="color: #BB0000;">NA</span>           <span style="text-decoration: underline;">2</span>011 Annual  67.4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> ACEH         <span style="color: #BB0000;">NA</span>           <span style="text-decoration: underline;">2</span>012 Annual  67.8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> ACEH         <span style="color: #BB0000;">NA</span>           <span style="text-decoration: underline;">2</span>013 Annual  68.3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> ACEH         <span style="color: #BB0000;">NA</span>           <span style="text-decoration: underline;">2</span>014 Annual  68.8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> ACEH         <span style="color: #BB0000;">NA</span>           <span style="text-decoration: underline;">2</span>015 Annual  69.4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> ACEH         <span style="color: #BB0000;">NA</span>           <span style="text-decoration: underline;">2</span>016 Annual  70  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> ACEH         <span style="color: #BB0000;">NA</span>           <span style="text-decoration: underline;">2</span>017 Annual  70.6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> ACEH         <span style="color: #BB0000;">NA</span>           <span style="text-decoration: underline;">2</span>018 Annual  71.2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> ACEH         <span style="color: #BB0000;">NA</span>           <span style="text-decoration: underline;">2</span>019 Annual  71.9</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 7,057 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ Read the metadata with `bps_metadata()`</span></span></span></code></pre></div>
<p><code><a href="../reference/bps_dataset.html">bps_get_dataset()</a></code> returns a tibble with the
<code>bpsr_tbl</code> subclass. It has a <code>metadata</code>
attribute, which we can access using <code><a href="../reference/bps_metadata.html">bps_metadata()</a></code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/bps_metadata.html">bps_metadata</a></span><span class="op">(</span><span class="va">hdi_headline</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">&lt;bpsr_metadata&gt;</span></span></span>
<span><span class="co">#&gt; List of 10</span></span>
<span><span class="co">#&gt;  $ dataset_id  : chr "413"</span></span>
<span><span class="co">#&gt;  $ dataset     : chr "[New Method] Human Development Index"</span></span>
<span><span class="co">#&gt;  $ vertical_var: chr "Province/Regency/City"</span></span>
<span><span class="co">#&gt;  $ subject     : chr "Human Development Indices"</span></span>
<span><span class="co">#&gt;  $ methodology : NULL</span></span>
<span><span class="co">#&gt;  $ activity    : NULL</span></span>
<span><span class="co">#&gt;  $ note        : chr "&amp;lt;p&amp;gt;&amp;lt;br /&amp;gt;&amp;lt;/p&amp;gt;&amp;lt;p&amp;gt;For further explanation regarding the new HDI method, please click the "| __truncated__</span></span>
<span><span class="co">#&gt;  $ def         : chr ""</span></span>
<span><span class="co">#&gt;  $ decimal     : chr "2"</span></span>
<span><span class="co">#&gt;  $ var         : chr ""</span></span></code></pre></div>
<p>The dataset has <code>vertical_var</code> and
<code>derived_var</code> columns, which are categorical variables. These
generic names follow the API’s semantics. Here,
<code>vertical_var</code> represents the region variable and
<code>derived_var</code> represents no variables.</p>
<p>The dataset also has a <code>var</code> column, which is a continuous
variable. This name doesn’t follow the API’s semantics.</p>
<p><code>var</code> is the measured variable. Here, it represents the
HDI. As we can see above, BPS doesn’t provide any metadata for this
variable when the values are index points.</p>
<p>By far, we have covered one of the most common tasks. The steps we
took are very similar to the ones we take when we use the agency’s
website. We start by navigating to a particular subject tab, browse the
list of datasets and finally download the dataset.</p>
<p>Unlike using the website, we didn’t have to download multiple files
to get the complete headline HDI dataset. The website splits the dataset
into different files for every two year of observations.</p>
</div>
<div class="section level2">
<h2 id="get-multiple-datasets">Get multiple datasets<a class="anchor" aria-label="anchor" href="#get-multiple-datasets"></a>
</h2>
<p>bpsr also provides a function to request multiple datasets at once,
namely <code><a href="../reference/bps_dataset.html">bps_get_datasets()</a></code>.</p>
<p>We’ll use the HDI datasets again to demonstrate the function. The HDI
builds on three dimensions: health, knowledge and standard of living.
We’ll focus on the knowledge dimension, which is constructed using two
indicators: expected years of schooling and mean years of schooling.</p>
<p>Let’s request the datasets of those two indicators by supplying a
vector of their IDs to <code><a href="../reference/bps_dataset.html">bps_get_datasets()</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">table_data_hdi_edu</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>  <span class="va">table_data_hdi</span>,</span>
<span>  <span class="va">title</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"[New Method] Mean Years of Schooling"</span>,</span>
<span>    <span class="st">"[New Method] Expected Years of Schooling"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Set `keep` to "vertical_var_id" to keep the column containing province,</span></span>
<span><span class="co"># city and regency IDs, which are helpful to join datasets</span></span>
<span><span class="va">hdi_edu</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bps_dataset.html">bps_get_datasets</a></span><span class="op">(</span></span>
<span>  <span class="va">table_data_hdi_edu</span><span class="op">$</span><span class="va">dataset_id</span>,</span>
<span>  lang <span class="op">=</span> <span class="st">"eng"</span>,</span>
<span>  keep <span class="op">=</span> <span class="st">"vertical_var_id"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">hdi_edu</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">&lt;bpsr_multiple_datasets&gt;</span></span></span>
<span><span class="co">#&gt; List of 2</span></span>
<span><span class="co">#&gt;  $ 415: bpsr_tbl [7,067 × 6] (S3: bpsr_tbl/tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ vertical_var_id: chr [1:7067] "1100" ...</span></span>
<span><span class="co">#&gt;   ..$ vertical_var   : chr [1:7067] "ACEH" ...</span></span>
<span><span class="co">#&gt;   ..$ derived_var    : chr [1:7067] NA ...</span></span>
<span><span class="co">#&gt;   ..$ year           : int [1:7067] 2010 2011 ...</span></span>
<span><span class="co">#&gt;   ..$ period         : chr [1:7067] "Annual" ...</span></span>
<span><span class="co">#&gt;   ..$ var            : num [1:7067] 8.28 8.32 ...</span></span>
<span><span class="co">#&gt;  $ 417: bpsr_tbl [7,077 × 6] (S3: bpsr_tbl/tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   ..$ vertical_var_id: chr [1:7077] "1100" ...</span></span>
<span><span class="co">#&gt;   ..$ vertical_var   : chr [1:7077] "ACEH" ...</span></span>
<span><span class="co">#&gt;   ..$ derived_var    : chr [1:7077] NA ...</span></span>
<span><span class="co">#&gt;   ..$ year           : int [1:7077] 2010 2011 ...</span></span>
<span><span class="co">#&gt;   ..$ period         : chr [1:7077] "Annual" ...</span></span>
<span><span class="co">#&gt;   ..$ var            : num [1:7077] 12.9 ...</span></span></code></pre></div>
<p><code><a href="../reference/bps_dataset.html">bps_get_datasets()</a></code> returns a named list with the
<code>bpsr_multiple_datasets</code> class, which contains
<code>bpsr_tbl</code>s. The above call gave us a list of the expected
years of schooling and mean years of schooling datasets<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;You may notice that the expected years of schooling and
mean years of schooling datasets have a different number of
observations. This stems from the difference in the number of
observations in 2010. The expected years of schooling dataset has
observations for Pringsewu, Mesuji, West Tulang Bawang, South Tangerang
City, Sabu Raijua, Morotai Islands, Tambrauw, Maybrat, Intan Jaya and
Deiyai. Data for these regions in that year are missing in the mean
years of schooling dataset.&lt;/p&gt;"><sup>3</sup></a> and we can subset each
of them by its ID.</p>
<p>When working with multiple datasets, we usually want to join them. We
can easily do this as we have told <code><a href="../reference/bps_dataset.html">bps_get_datasets()</a></code> to
give us the <code>vertical_var_id</code> column, which is useful to join
datasets that may have different styles or conventions for the shared
variable.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">school_mean_year</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span><span class="va">hdi_edu</span><span class="op">$</span><span class="va">`415`</span>, mean_years <span class="op">=</span> <span class="va">var</span><span class="op">)</span></span>
<span><span class="va">school_expected_year</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span><span class="va">hdi_edu</span><span class="op">$</span><span class="va">`417`</span>, expected_years <span class="op">=</span> <span class="va">var</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">school_mean_year</span>, <span class="va">school_expected_year</span><span class="op">)</span></span>
<span><span class="co">#&gt; Joining, by = c("vertical_var_id", "vertical_var", "derived_var", "year",</span></span>
<span><span class="co">#&gt; "period")</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 7,067 × 7</span></span></span>
<span><span class="co">#&gt;    vertical_var_id vertical_var derived_var  year period mean_years expected_y…¹</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1100            ACEH         <span style="color: #BB0000;">NA</span>           <span style="text-decoration: underline;">2</span>010 Annual       8.28         12.9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 1100            ACEH         <span style="color: #BB0000;">NA</span>           <span style="text-decoration: underline;">2</span>011 Annual       8.32         13.0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 1100            ACEH         <span style="color: #BB0000;">NA</span>           <span style="text-decoration: underline;">2</span>012 Annual       8.36         13.2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 1100            ACEH         <span style="color: #BB0000;">NA</span>           <span style="text-decoration: underline;">2</span>013 Annual       8.44         13.4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 1100            ACEH         <span style="color: #BB0000;">NA</span>           <span style="text-decoration: underline;">2</span>014 Annual       8.71         13.5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 1100            ACEH         <span style="color: #BB0000;">NA</span>           <span style="text-decoration: underline;">2</span>015 Annual       8.77         13.7</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 1100            ACEH         <span style="color: #BB0000;">NA</span>           <span style="text-decoration: underline;">2</span>016 Annual       8.86         13.9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 1100            ACEH         <span style="color: #BB0000;">NA</span>           <span style="text-decoration: underline;">2</span>017 Annual       8.98         14.1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 1100            ACEH         <span style="color: #BB0000;">NA</span>           <span style="text-decoration: underline;">2</span>018 Annual       9.09         14.3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 1100            ACEH         <span style="color: #BB0000;">NA</span>           <span style="text-decoration: underline;">2</span>019 Annual       9.18         14.3</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 7,057 more rows, and abbreviated variable name ¹​expected_years</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="request-other-resources">Request other resources<a class="anchor" aria-label="anchor" href="#request-other-resources"></a>
</h2>
<p>The scope of bpsr extends beyond the common task of getting a
dataset, but the package doesn’t provide wrapper functions for all
endpoints. For this reason, the package makes the core and low-level
functions available to users. You can use these functions to request
other resources, such as publications and infographics. See the
Reference page on the website for more details.</p>
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Dzulfiqar Fathur Rahman.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
